function drawChart(){function s(a){var b=this.getChartLayoutInterface();b.getChartAreaBoundingBox();if($(window).width()>=700){var d=.7;document.querySelector(".overlay-marker").style.top=Math.round((Math.round(b.getYLocation(a.getValue(p,1)))-25)*d)+"px",document.querySelector(".overlay-marker").style.left=Math.round((Math.round(b.getXLocation(p))-50)*d)+"px"}else document.querySelector(".overlay-marker").style.top=Math.round(b.getYLocation(a.getValue(p,1))*($(window).width()-32)/700)-10+"px",document.querySelector(".overlay-marker").style.left=Math.round(b.getXLocation(p)*($(window).width()-32)/700)-20+"px";document.getElementById("iqTest_UserImage").src=fsGame.user.avatar}var a,b=[];b.push(["Câu hỏi","Bạn","Trung bình"]);var c=90,d=50,e=0,f=0,g=0;for(a=1;a<maxQuestionNumber+1;a++){var h=timesGiveAnswer[a-1],i=Math.random()*(c-d+1)+d;b.push([a+"",h,i]),e+=h,f+=i,h<i&&g++}parseFloat(e/maxQuestionNumber).toFixed(2),parseFloat(f/maxQuestionNumber).toFixed(2);document.getElementById("iqTest_ResultDetail").innerHTML="<div>Trả lời đúng:"+currentTotalPoint+"/"+maxQuestionNumber+"</div>";var n,o,p,m=g/maxQuestionNumber*50+currentTotalPoint/maxQuestionNumber*100;m<=55?(p=1,o="0.1%",n="người KÉM CỎI."):m<=70?(p=2,o="2%",n="người TỐI DẠ."):m<=85?(p=3,o="14%",n="người BÌNH THƯỜNG."):m<=100?(p=4,o="34%",n="người BÌNH THƯỜNG."):m<=115?(p=5,o="34%",n="người BÌNH THƯỜNG."):m<=130?(p=6,o="14%",n="người THÔNG MINH."):m<=145?(p=7,o="2%",n="người THÔNG MINH VƯỢT TRỘI."):(p=8,o="0.1%",n="người THIÊN TÀI."),document.getElementById("iqResultIQNumber").innerHTML="   IQ "+Math.round(m)+"  - TOP "+o;var q=google.visualization.arrayToDataTable([["IQ","% người được"],["",.5],["IQ55",1],["IQ70",4],["IQ85",14],["IQ100",34],["IQ115",14],["IQ130",4],["IQ145",1],["",.5]]),r={series:{0:{pointShape:{type:"star",sides:5,dent:0},lineDashStyle:[4,1]}},colors:["#e2431e","#201F56"],lineWidth:4,pointSize:30,curveType:"function",vAxis:{format:"#'%'",textPosition:"in"},legend:{position:"none"},height:440,width:700,chartArea:{width:"95%",height:"75%",bottom:30}};console.log($(".share").width());var t=document.getElementById("linechart_material"),u=new google.visualization.LineChart(t);for(google.visualization.events.addListener(u,"ready",function(){t.innerHTML='<img id=iqTest_chartImg src="'+u.getImageURI()+'">',console.log("1")}),google.visualization.events.addListener(u,"ready",s.bind(u,q)),u.draw(q,r),setTimeout(function(){fsGame.setResultHtml($(".share").html()),fsGame.gameOver(200*m),fsGame.createShare({share:!1,htmlTag:"#canvan",name:fsGame.user.displayName+" có IQ:"+Math.round(m)+" thuộc Top "+o+" "+n,des:"Test IQ miễn phí cùng Funstart"},function(a){console.log("res:",a)})},1e3),a=0;a<resultArray.length;a++)resultArray[a]?document.getElementById("rs"+(a+1)).innerHTML="<img class=iqTestResultImage src='/sources/game/10/images/result-thumb/tick.png'/>":document.getElementById("rs"+(a+1)).innerHTML="<img class=iqTestResultImage src='/sources/game/10/images/result-thumb/cross.png'/>"}function iqQuestionsInit(){maxQuestionNumber=10,currentTotalPoint=0,currentQuestionIndex=0,iqQuestions=[],timesGiveAnswer=[],iqTestSource=shuffle(iqTestSource);var a;for(a=0;a<maxQuestionNumber;a++)for(var b in iqTestSource[a]){var c=new iqQuestion_inputTextAnswers(null,"/sources/game/10/images/question/"+b+".jpg",iqTestSource[a][b]);iqQuestions.push(c)}displayNextStage(currentQuestionIndex)}function checkAnswerAndChangeToNextStage(a){a==document.getElementById("iqTestInputAnswerTextBox").value?(currentTotalPoint++,resultArray.push(!0)):resultArray.push(!1),clearTimeout(timeoutVariableToShutdownTimeout),clearInterval(countDownTime),timesGiveAnswer.push(timeCountUp),displayNextStage(++currentQuestionIndex)}function reClass(a,b,c){document.getElementById(a).className="",setTimeout(function(){document.getElementById(a).className=b,c()},10)}function displayNextStage(a){a<maxQuestionNumber?reClass("gameContent","animated fadeInDown",function(){timeCountUp=0,document.querySelector("div#iqTextCountdownTime").innerHTML=timeCountUp+" giây",timeoutVariableToShutdownTimeout=setTimeout(function(){countDownTime=setInterval(function(){timeCountUp++,document.querySelector("div#iqTextCountdownTime").innerHTML=timeCountUp+" giây"},500)},1e3),document.querySelector("div#iqTextQuestionNumber").innerHTML="Câu hỏi "+(a+1)+" / "+maxQuestionNumber,out="",currentIqQuestion=iqQuestions[a],null!=currentIqQuestion.questionContentText&&(out+=currentIqQuestion.questionContentText.questionContentTextDisplay()),null!=currentIqQuestion.questionContentImageUrl&&(out+=currentIqQuestion.questionContentImageUrl.questionContentImageUrlDisplay()),out+=currentIqQuestion.inputTextAnswer.display(),document.querySelector("div#iqTestContent").innerHTML=out}):(document.querySelector("div#iqTextCountdownTime").innerHTML="",document.querySelector("div#iqTextQuestionNumber").innerHTML="",document.querySelector("div#iqTestContent").innerHTML="",0===googleChartCallTime&&(google.charts.load("current",{packages:["corechart"]}),googleChartCallTime++),google.charts.setOnLoadCallback(drawChart))}function shuffle(a){for(var d,b=[],c=a.length;c;)d=Math.floor(Math.random()*a.length),d in a&&(b.push(a[d]),delete a[d],c--);return b}function CorrectAnswer(a){this.correctAnswer=a}function QuestionContentText(a){this.questionContentText=a}function QuestionContentImage(a){this.questionContentImageUrl=a}function MultipleChoiceTextAnswers(a,b){this.correctAnswer=new CorrectAnswer(a),this.answers=b}function MultipleChoiceImageAnswers(a,b){this.correctAnswer=new CorrectAnswer(a),this.answers=b}function InputTextAnswers(a){this.correctAnswer=new CorrectAnswer(a)}function iqQuestion(a,b){null!=a?this.questionContentText=new QuestionContentText(a):this.questionContentText=null,null!=b?this.questionContentImageUrl=new QuestionContentImage(b):this.questionContentImageUrl=null}function iqQuestion_multipleChoiceImageAnswers(a,b,c,d){iqQuestion.call(this,a,b),this.imageAnswers=new MultipleChoiceImageAnswers(c,d)}function iqQuestion_inputTextAnswers(a,b,c){iqQuestion.call(this,a,b),this.inputTextAnswer=new InputTextAnswers(c)}$(document).ready(function(){fsGame.gameStart(function(){iqQuestionsInit()})});var maxQuestionNumber,currentTotalPoint,resultArray=[],currentQuestionIndex,iqQuestions,currentIqQuestion,out,countDownTime,timeoutVariableToShutdownTimeout,timeCountUp,timesGiveAnswer,googleChartCallTime=0,iqTestSource=[{1:6},{2:8},{3:312},{4:128},{5:9},{6:225},{7:95},{8:4},{9:4},{10:1},{11:4},{12:5},{13:4},{14:3},{15:3},{16:2},{17:3},{18:3},{19:4},{20:3},{21:4},{22:32},{23:12},{24:3},{25:9},{26:19},{27:720},{28:1},{29:2},{30:10},{31:1},{32:6},{33:37},{34:120},{35:2325},{36:566},{37:4},{38:6},{39:126},{40:16},{41:23},{42:6258},{43:49},{44:25},{45:320},{46:85914},{47:3},{48:11},{49:49},{50:12},{51:7},{52:12},{53:47},{54:5},{55:9},{56:27},{57:6},{58:5},{59:2},{60:40},{61:55},{62:16},{63:4},{64:4},{65:2},{66:2},{67:3},{68:5},{69:2},{70:4},{71:12},{72:26},{73:4},{74:83},{75:8},{76:10},{77:6},{78:1},{79:126},{80:720},{81:3},{82:3},{83:2},{84:2},{85:4},{86:3},{87:913},{88:4},{89:100},{90:16},{91:41},{92:14},{93:7},{94:99},{95:6859},{96:4},{97:5},{98:630},{99:2},{100:15},{101:4},{102:18},{103:3},{104:10},{105:42},{106:4254},{107:453},{108:37},{109:8},{110:5},{111:28917},{112:17},{113:29},{114:3},{115:20},{116:2},{117:122},{118:24},{119:10},{120:120},{121:87},{122:13},{123:2150},{124:12},{125:59},{126:2},{127:8},{128:2},{129:5},{130:3},{131:1},{132:2},{133:4},{134:2},{135:1},{136:2},{137:5},{138:3},{139:5},{140:3}];CorrectAnswer.prototype.checkCorrectAnswer=function(){return"checkAnswerAndChangeToNextStage("+this.correctAnswer+")"},QuestionContentText.prototype.questionContentTextDisplay=function(){return"<div id='iqQuestion_questionContent'>"+this.questionContentText+"</div>"},QuestionContentImage.prototype.questionContentImageUrlDisplay=function(){return"<div ><img id='iqQuestion_questionImage' src='"+this.questionContentImageUrl+"' alt='Iq question image'/></div>"},MultipleChoiceTextAnswers.prototype.display=function(){var b,a="<section class=press>";for(b=0;b<this.answers.length;b++)a+="<button class='IqTestAnswer_imageAnswers' onclick='"+this.correctAnswer.checkCorrectAnswer(b)+"'>"+this.answers[b]+"</button>";return a+="</section>"},MultipleChoiceImageAnswers.prototype.display=function(){var b,a="<section class=press>";for(b=0;b<this.answers.length;b++)a+="<button class='IqTestAnswer_imageAnswers' onclick='"+this.correctAnswer.checkCorrectAnswer(b)+"'><img src='"+this.answers[b]+"'/></button>";return a+="</section>"},InputTextAnswers.prototype.display=function(){var a="<div id='iqTestInputAnswerPart'><label> Đáp án </label><input id=iqTestInputAnswerTextBox type=text /> </div><section class=press id=iqTestInputAnswerButton><button class='IqTestAnswer_imageAnswers'  onclick='"+this.correctAnswer.checkCorrectAnswer()+"'>Trả lời</button></section>";return a};var iqQuestion_multipleChoiceTextAnswers=function(a,b,c,d){iqQuestion.call(this,a,b),this.textAnswers=new MultipleChoiceTextAnswers(c,d)};